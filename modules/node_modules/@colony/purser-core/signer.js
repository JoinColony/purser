/* @flow */

import { Signer } from 'ethers';

import {
  DESCRIPTORS,
} from './defaults';

import type {
  WalletArgumentsType,
} from './flowtypes';

const { GENERIC_PROPS } = DESCRIPTORS;

export default class PurserSigner extends Signer {
  constructor(purserWalletInstance: WalletArgumentsType, provider) {
    if (!provider) {
      /*
       * @TODO Better message copy
       */
      throw new Error('No provider set');
    }
    super();
    Object.defineProperties(this, {
      provider: {
        value: provider,
        ...GENERIC_PROPS,
      },
      getAddress: {
        value: async () => purserWalletInstance.address,
        ...GENERIC_PROPS,
      },
    });
  }
}
